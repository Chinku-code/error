FROM registry.dev.sbiepay.sbi:8443/spark/sparkrecon:4.0.0_12092025v43

WORKDIR /app

ENV SPARK_SUBMIT_OPTS="-Dspark.sql.artifact.dir=/tmp/spark-artifacts"

RUN mkdir -p /app/input_files /app/output_files /tmp/spark-artifacts \
    && chmod -R 777 /app /tmp

COPY spring-context-spark-1.0.jar /app/app.jar

ENTRYPOINT ["spark-submit"]
CMD ["/app/app.jar"]
